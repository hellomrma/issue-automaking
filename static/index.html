<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>티스토리 글 자동 생성</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="/style.css" />
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
</head>
<body>
  <div class="app">
    <header class="header">
      <h1>티스토리 글 자동 생성</h1>
      <p class="tagline">트렌드 키워드를 찾고, 그에 맞는 블로그 글을 마크다운으로 만들어 드립니다.</p>
    </header>

    <main class="main two-column">
      <div class="column-left">
        <section class="card trends-card">
        <h2>1. 트렌드 키워드</h2>

        <h3 class="trend-sub">구글 트렌드</h3>
        <div class="row">
          <button type="button" id="fetchTrends" class="btn btn-primary">인기 검색어 불러오기</button>
        </div>
        <div id="trendsStatus" class="status" aria-live="polite"></div>
        <div id="trendsContainer"></div>
      </section>

      <section class="card generate-card">
        <h2>2. 글 생성</h2>
        <div class="input-mode-tabs">
          <button type="button" id="modeKeyword" class="mode-tab active">키워드로 생성</button>
          <button type="button" id="modeUrl" class="mode-tab">URL 분석으로 생성</button>
        </div>
        <div id="keywordInputSection">
          <div class="row">
            <label class="flex1">
              키워드 (트렌드에서 선택하거나 직접 입력)
              <input type="text" id="keyword" placeholder="예: ChatGPT 활용법" autocomplete="off" />
            </label>
          </div>
          <div class="row">
            <label class="flex1">
              참고 URL (선택, 이 URL의 내용을 참고하여 글 작성)
              <input type="url" id="referenceUrl" placeholder="https://example.com/reference-article" autocomplete="off" />
            </label>
          </div>
        </div>
        <div id="urlInputSection" class="hidden">
          <div class="row">
            <label class="flex1">
              분석할 URL (해당 페이지의 내용을 바탕으로 글 생성)
              <input type="url" id="sourceUrl" placeholder="https://example.com/article" autocomplete="off" />
            </label>
          </div>
        </div>
        <div class="style-section">
          <label class="section-label">글 스타일</label>
          <div class="style-cards">
            <label class="style-card">
              <input type="radio" name="style" value="정보성" checked />
              <span class="style-card-content">
                <span class="style-icon">📚</span>
                <span class="style-name">정보성</span>
                <span class="style-desc">유용한 정보를 체계적으로 정리한 설명형 글</span>
              </span>
            </label>
            <label class="style-card">
              <input type="radio" name="style" value="리뷰" />
              <span class="style-card-content">
                <span class="style-icon">⭐</span>
                <span class="style-name">리뷰</span>
                <span class="style-desc">경험과 의견이 담긴 제품/서비스 리뷰</span>
              </span>
            </label>
            <label class="style-card">
              <input type="radio" name="style" value="How-to" />
              <span class="style-card-content">
                <span class="style-icon">🔧</span>
                <span class="style-name">How-to</span>
                <span class="style-desc">단계별로 따라 할 수 있는 실용 가이드</span>
              </span>
            </label>
            <label class="style-card">
              <input type="radio" name="style" value="뉴스해설" />
              <span class="style-card-content">
                <span class="style-icon">📰</span>
                <span class="style-name">뉴스해설</span>
                <span class="style-desc">최근 이슈를 요약하고 분석하는 해설</span>
              </span>
            </label>
          </div>
        </div>
        <div class="row">
          <label>
            글 길이
            <select id="length">
              <option value="short">짧게 (400~600자)</option>
              <option value="medium">보통 (800~1200자)</option>
              <option value="long" selected>길게 (1500~2000자)</option>
            </select>
          </label>
        </div>
        <div class="row">
          <label class="flex1">
            글 작성 가이드 (선택, 원하는 글의 방향/톤/포함 내용)
            <textarea id="guide" rows="2" placeholder="예: 초보자 눈높이로 설명해 주세요 / 비교 표를 포함해 주세요 / ~에 대해 자세히 다뤄 주세요"></textarea>
          </label>
        </div>
        <div class="row">
          <label>
            <input type="checkbox" id="useWebSearch" checked /> 최신 정보 검색 반영
          </label>
          <label>
            <input type="checkbox" id="useEmoji" checked /> 이모지 넣기
          </label>
          <label>
            <input type="checkbox" id="saveKey" /> API 키 저장 (세션)
          </label>
        </div>
        <div class="row">
          <label class="flex1">
            Claude API 키 (Anthropic, 선택·없으면 서버 env 사용)
            <input type="password" id="apiKey" placeholder="sk-ant-..." autocomplete="off" />
          </label>
        </div>
        <div class="btn-group">
          <button type="button" id="generate" class="btn btn-primary">글 생성</button>
          <button type="button" id="cancelGenerate" class="btn btn-ghost hidden">취소</button>
          <span class="shortcut-hint">Ctrl+Enter</span>
        </div>
        <div id="generateStatus" class="status" aria-live="polite"></div>
      </section>
      </div>

      <div class="column-right">
        <section class="card output-card">
        <h2>3. 결과</h2>
        <div class="output-header">
          <div class="output-tabs">
            <button type="button" id="tabSource" class="tab-btn active">마크다운</button>
            <button type="button" id="tabPreview" class="tab-btn">미리보기</button>
          </div>
          <div class="output-meta">
            <span id="charCount" class="char-count">0자</span>
          </div>
          <div class="output-actions">
            <button type="button" id="copyMd" class="btn btn-ghost">복사</button>
            <button type="button" id="downloadMd" class="btn btn-ghost">서버에 저장</button>
          </div>
        </div>
        <pre id="output" class="output"></pre>
        <div id="preview" class="preview hidden"></div>
      </section>
      </div>
    </main>

    <footer class="footer">
      트렌드: Google Trends · 글 생성: Anthropic Claude
    </footer>
  </div>
  <script src="/app.js"></script>
</body>
</html>
