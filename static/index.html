<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>티스토리 글 자동 생성</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="/style.css" />
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
</head>
<body>
  <div class="app">
    <header class="header">
      <h1>티스토리 글 자동 생성</h1>
      <p class="tagline">트렌드 키워드를 찾고, 그에 맞는 블로그 글을 마크다운으로 만들어 드립니다.</p>
    </header>

    <main class="main">
      <section class="card trends-card">
        <h2>1. 트렌드 키워드</h2>

        <h3 class="trend-sub">구글 트렌드</h3>
        <div class="row">
          <button type="button" id="fetchTrends" class="btn btn-primary">인기 검색어 불러오기</button>
        </div>
        <div id="trendsStatus" class="status" aria-live="polite"></div>
        <div id="trendsContainer"></div>
      </section>

      <section class="card generate-card">
        <h2>2. 글 생성</h2>
        <div class="input-mode-tabs">
          <button type="button" id="modeKeyword" class="mode-tab active">키워드로 생성</button>
          <button type="button" id="modeUrl" class="mode-tab">URL 분석으로 생성</button>
        </div>
        <div id="keywordInputSection" class="row">
          <label class="flex1">
            키워드 (트렌드에서 선택하거나 직접 입력)
            <input type="text" id="keyword" placeholder="예: ChatGPT 활용법" autocomplete="off" />
          </label>
        </div>
        <div id="urlInputSection" class="row hidden">
          <label class="flex1">
            분석할 URL (해당 페이지의 내용을 바탕으로 글 생성)
            <input type="url" id="sourceUrl" placeholder="https://example.com/article" autocomplete="off" />
          </label>
        </div>
        <div class="row">
          <label>
            스타일
            <select id="style">
              <option value="정보성">정보성</option>
              <option value="리뷰">리뷰</option>
              <option value="How-to">How-to</option>
              <option value="뉴스해설">뉴스해설</option>
            </select>
          </label>
          <label>
            글 길이
            <select id="length">
              <option value="short">짧게 (400~600자)</option>
              <option value="medium" selected>보통 (800~1200자)</option>
              <option value="long">길게 (1500~2000자)</option>
            </select>
          </label>
        </div>
        <div class="row">
          <label>
            <input type="checkbox" id="useWebSearch" checked /> 최신 정보 검색 반영
          </label>
          <label>
            <input type="checkbox" id="useEmoji" checked /> 이모지 넣기
          </label>
          <label>
            <input type="checkbox" id="saveKey" /> API 키 저장 (로컬)
          </label>
        </div>
        <div class="row">
          <label class="flex1">
            Claude API 키 (Anthropic, 선택·없으면 서버 env 사용)
            <input type="password" id="apiKey" placeholder="sk-ant-..." autocomplete="off" />
          </label>
        </div>
        <div class="btn-group">
          <button type="button" id="generate" class="btn btn-primary">글 생성</button>
          <button type="button" id="cancelGenerate" class="btn btn-ghost hidden">취소</button>
          <span class="shortcut-hint">Ctrl+Enter</span>
        </div>
        <div id="generateStatus" class="status" aria-live="polite"></div>
      </section>

      <section class="card output-card">
        <h2>3. 결과</h2>
        <div class="output-header">
          <div class="output-tabs">
            <button type="button" id="tabSource" class="tab-btn active">마크다운</button>
            <button type="button" id="tabPreview" class="tab-btn">미리보기</button>
          </div>
          <div class="output-meta">
            <span id="charCount" class="char-count">0자</span>
          </div>
          <div class="output-actions">
            <button type="button" id="copyMd" class="btn btn-ghost">복사</button>
            <button type="button" id="downloadMd" class="btn btn-ghost">MD 파일로 저장</button>
          </div>
        </div>
        <pre id="output" class="output"></pre>
        <div id="preview" class="preview hidden"></div>
      </section>
    </main>

    <footer class="footer">
      트렌드: Google Trends · 글 생성: Anthropic Claude
    </footer>
  </div>
  <script src="/app.js"></script>
</body>
</html>
